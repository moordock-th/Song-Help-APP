<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chord Studio Pro</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #38bdf8;
            --text: #f1f5f9;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            margin: 0; padding: 20px;
        }

        .container { max-width: 1000px; margin: 0 auto; }

        .no-print { display: block; }

        /* Eingabebereich */
        .editor-box {
            background: var(--card);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        textarea { 
            width: 100%; height: 150px; 
            background: #0f172a; border: 1px solid #334155; 
            color: white; padding: 15px; border-radius: 8px; 
            font-size: 16px; box-sizing: border-box;
        }

        .controls { margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap; }
        
        button { 
            padding: 10px 20px; border: none; border-radius: 6px; 
            cursor: pointer; font-weight: bold; transition: 0.2s;
        }
        .btn-main { background: var(--accent); color: #0f172a; }
        .btn-sec { background: #475569; color: white; }

        /* Akkord-Diagramme */
        .chord-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 20px; 
        }

        .chord-card { 
            background: white; color: #121212; 
            padding: 15px; border-radius: 10px; text-align: center;
        }

        .chord-name { font-size: 1.2em; font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #eee; }

        /* SVG Styling */
        svg { width: 100px; height: 120px; }

        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; }
            .container { max-width: 100%; }
            .chord-card { border: 1px solid #ccc; break-inside: avoid; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="no-print">
        <h1>üé∏ Chord Studio Pro</h1>
        <div class="editor-box">
            <textarea id="userInput" placeholder="Tippe Text mit Akkorden (z.B. c5, am7, Dmaj7, g, fsus4)..." oninput="renderChords()"></textarea>
            <div class="controls">
                <button class="btn-main" onclick="renderChords()">Aktualisieren</button>
                <button class="btn-sec" onclick="window.print()">üñ®Ô∏è PDF / Drucken</button>
                <button class="btn-sec" style="background:#ef4444" onclick="document.getElementById('userInput').value=''; renderChords()">L√∂schen</button>
            </div>
        </div>
    </div>

    <h2 id="resultTitle">Gefundene Akkorde:</h2>
    <div id="chordOutput" class="chord-grid"></div>
</div>

<script>
    // Umfassende Datenbank
    const patterns = {
        'C': [-1, 3, 2, 0, 1, 0], 'Cm': [-1, 3, 5, 5, 4, 3], 'C7': [-1, 3, 2, 3, 1, 0], 'Cmaj7': [-1, 3, 2, 0, 0, 0], 'C5': [-1, 3, 5, 5, -1, -1], 'Csus2': [-1, 3, 0, 0, 1, 3], 'Csus4': [-1, 3, 3, 0, 1, 1], 'Cadd9': [-1, 3, 2, 0, 3, 0], 'Cm7': [-1, 3, 5, 3, 4, 3],
        'C#': [-1, 4, 6, 6, 6, 4], 'C#m': [-1, 4, 6, 6, 5, 4], 'C#7': [-1, 4, 3, 4, 2, -1], 'Db': [-1, 4, 6, 6, 6, 4],
        'D': [-1, -1, 0, 2, 3, 2], 'Dm': [-1, -1, 0, 2, 3, 1], 'D7': [-1, -1, 0, 2, 1, 2], 'Dmaj7': [-1, -1, 0, 2, 2, 2], 'D5': [-1, -1, 0, 2, 3, -1], 'Dsus2': [-1, -1, 0, 2, 3, 0], 'Dsus4': [-1, -1, 0, 2, 3, 3], 'Dm7': [-1, -1, 0, 2, 1, 1],
        'Eb': [-1, -1, 1, 3, 4, 3], 'Ebm': [-1, -1, 1, 3, 4, 2],
        'E': [0, 2, 2, 1, 0, 0], 'Em': [0, 2, 2, 0, 0, 0], 'E7': [0, 2, 0, 1, 0, 0], 'Emaj7': [0, 2, 1, 1, 0, 0], 'E5': [0, 2, 2, -1, -1, -1], 'Em7': [0, 2, 0, 0, 0, 0],
        'F': [1, 3, 3, 2, 1, 1], 'Fm': [1, 3, 3, 1, 1, 1], 'F7': [1, 3, 1, 2, 1, 1], 'Fmaj7': [-1, 3, 2, 2, 1, 0], 'F5': [1, 3, 3, -1, -1, -1],
        'F#': [2, 4, 4, 3, 2, 2], 'F#m': [2, 4, 4, 2, 2, 2], 'Gb': [2, 4, 4, 3, 2, 2],
        'G': [3, 2, 0, 0, 0, 3], 'Gm': [3, 5, 5, 3, 3, 3], 'G7': [3, 2, 0, 0, 0, 1], 'Gmaj7': [3, 2, 0, 0, 0, 2], 'G5': [3, 5, 5, -1, -1, -1], 'Gsus4': [3, 3, 0, 0, 1, 3], 'Gm7': [3, 5, 3, 3, 3, 3],
        'Ab': [4, 6, 6, 5, 4, 4], 'Am': [-1, 0, 2, 2, 1, 0], 'A': [-1, 0, 2, 2, 2, 0], 'A7': [-1, 0, 2, 0, 2, 0], 'Amaj7': [-1, 0, 2, 1, 2, 0], 'A5': [-1, 0, 2, 2, -1, -1], 'Am7': [-1, 0, 2, 0, 1, 0], 'Asus2': [-1, 0, 2, 2, 0, 0], 'Asus4': [-1, 0, 2, 2, 3, 0],
        'Bb': [-1, 1, 3, 3, 3, 1], 'B': [-1, 2, 4, 4, 4, 2], 'Bm': [-1, 2, 4, 4, 3, 2], 'B7': [-1, 2, 1, 2, 0, 2], 'H': [-1, 2, 4, 4, 4, 2], 'Hm': [-1, 2, 4, 4, 3, 2]
    };

    function createSvg(frets) {
        let svg = `<svg viewBox="0 0 100 120">
            <line x1="10" y1="20" x2="90" y2="20" stroke="black" stroke-width="3"/>`; // Sattel
        for(let i=0; i<6; i++) svg += `<line x1="${10+i*16}" y1="20" x2="${10+i*16}" y2="110" stroke="black" stroke-width="1"/>`; // Saiten
        for(let i=0; i<5; i++) svg += `<line x1="10" y1="${20+i*18}" x2="90" y2="${20+i*18}" stroke="black" stroke-width="1"/>`; // B√ºnde
        
        frets.forEach((f, s) => {
            let x = 10 + s * 16;
            if (f === -1) svg += `<text x="${x-4}" y="15" font-size="12" fill="red">√ó</text>`;
            else if (f === 0) svg += `<circle cx="${x}" cy="12" r="4" fill="none" stroke="green" stroke-width="2"/>`;
            else svg += `<circle cx="${x}" cy="${20 + f*18 - 9}" r="6" fill="black"/>`;
        });
        return svg + `</svg>`;
    }

    function renderChords() {
        const input = document.getElementById('userInput').value;
        const output = document.getElementById('chordOutput');
        output.innerHTML = '';
        
        const words = input.split(/[\s\n,.;]+/);
        const used = new Set();

        words.forEach(w => {
            if(!w) return;
            // Normalisierung: am7 -> Am7, c5 -> C5
            let clean = w.charAt(0).toUpperCase() + w.slice(1);
            if(patterns[clean]) used.add(clean);
            else if(patterns[w.toUpperCase()]) used.add(w.toUpperCase());
        });

        used.forEach(chord => {
            output.innerHTML += `<div class="chord-card"><div class="chord-name">${chord}</div>${createSvg(patterns[chord])}</div>`;
        });
        
        document.getElementById('resultTitle').style.display = used.size > 0 ? 'block' : 'none';
    }
</script>
</body>
</html>
